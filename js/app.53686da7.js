(function(e){function t(t){for(var r,o,s=t[0],u=t[1],c=t[2],l=0,d=[];l<s.length;l++)o=s[l],i[o]&&d.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var p=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},2324:function(e,t,n){"use strict";var r=n("b42a"),i=n.n(r);i.a},3:function(e,t){},"51b3":function(e,t,n){"use strict";var r=n("d86e"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var r=n("3b8d"),i=n("5d73"),a=n.n(i),o=(n("cadf"),n("551c"),n("097d"),n("2b0e")),s=n("2f62"),u=n("8c4f"),c=n("4eb5"),p=n.n(c),l=n("9f7b"),d=(n("f9e3"),n("2dd8"),n("34eb")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("layout",[n("router-view")],1)},h=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"page"}},[n("nav-bar"),n("b-container",[n("b-row",[n("b-col"),n("b-col",{attrs:{md:"9",xl:"9"}},[e._t("default")],2),n("b-col")],1)],1)],1)},v=[],g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-navbar",{staticClass:"mb-3",attrs:{toggleable:"md"}},[r("b-navbar-brand",{attrs:{to:e.$store.getters.showApps?"/applications":"/"}},[r("img",{class:["logo",e.secureLogo,e.visibleLogo],attrs:{src:n("9b19")},on:{load:function(t){e.isLogoVisible=!0}}})]),r("b-navbar-toggle",{attrs:{target:"m-main-nav"}}),r("b-collapse",{attrs:{"is-nav":"",id:"m-main-nav"}},[r("b-navbar-nav",[e.$store.getters.showApps?[e.$store.getters.showApps?r("b-nav-item",{attrs:{to:"/applications"}},[e._v("\n          Applications\n        ")]):e._e()]:[r("b-nav-item",{attrs:{to:"/master"}},[e._v("Master Password")])],r("b-nav-item",{attrs:{to:"/settings"}},[e._v("Settings")]),e.$store.getters.showApps?[r("b-nav-item",{attrs:{to:"/master"}},[e._v("\n          Logout\n        ")])]:e._e()],2)],1)],1)},b=[],w={name:"nav-bar",data:function(){return{isLogoVisible:!1}},computed:{visibleLogo:function(){return this.isLogoVisible?"visible":""},secureLogo:function(){return this.$store.getters.showApps?"secure":""}}},y=w,x=(n("2324"),n("2877")),k=Object(x["a"])(y,g,b,!1,null,"0c4bdd8d",null);k.options.__file="nav-bar.vue";var A=k.exports,j={name:"default-layout",components:{NavBar:A}},M=j,C=Object(x["a"])(M,m,v,!1,null,null,null);C.options.__file="default.vue";var O=C.exports,D={components:{Layout:O}},I=D,_=Object(x["a"])(I,f,h,!1,null,null,null);_.options.__file="App.vue";var T=_.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[n("b-form-group",[n("div",{staticClass:"emoji-hash text-center"},[e._v("\n        "+e._s(e.emoji)+"\n      ")])]),e.isConfirming?[n("b-form-group",[n("div",{staticClass:"emoji-hash text-center"},[e._v("\n          "+e._s(e.emojiConfirm)+"\n        ")])]),e.isConfirming?n("b-form-group",{attrs:{label:"Confirm your Master Password","label-for":"master-confirmation","invalid-feedback":e.invalidConfirmFeedback,state:e.confirmState}},[n("b-form-input",{ref:"confirmRef",attrs:{autocomplete:"off",disabled:e.computing,state:e.confirmState,id:"master-confirmation",type:"password"},on:{input:function(t){e.confirmChanged=!0}},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1):e._e()]:[e.isConfirming?e._e():n("b-form-group",{attrs:{label:e.masterLabel,"label-for":"master-input",description:"Used for decrypting storage and computing passwords","invalid-feedback":e.invalidPasswordFeedback,state:e.passwordState}},[n("b-form-input",{ref:"passwordRef",attrs:{autocomplete:"off",required:"",disabled:e.computing,state:e.passwordState,id:"master-input",type:"password"},on:{input:function(t){e.passwordChanged=!0}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],n("b-button",{attrs:{disabled:e.computing||!e.canSubmit,type:"submit",variant:"primary"}},[e._v("\n      "+e._s(e.submitText)+"\n    ")]),e.isConfirming?n("b-button",{staticClass:"ml-2",attrs:{type:"reset",variant:"danger"}},[e._v("Reset")]):e._e()],2),n("computing",{attrs:{active:e.computing,text:"Decryption keys are being computed..."}})],1)},R=[],E=(n("a481"),n("6ebd")),L=n.n(E),N=(n("f559"),n("cebc")),$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{centered:"","hide-header":"","hide-footer":"",busy:"","no-close-on-esc":"","no-close-on-backdrop":""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("div",{staticClass:"text-center mb-1"},[e._v(e._s(e.text))]),n("b-progress",{attrs:{value:e.progress,variant:"info",animated:""}})],1)},z=[],P=2e3,K=20,Q={name:"computing",props:{active:{type:Boolean,required:!0},text:{type:String,required:!0}},data:function(){return{progress:0}},watch:{active:function(e){var t=this;if(e){var n=0,r=function e(){n++!==K&&(t.progress=100*n/K,setTimeout(e,P/K))};r()}}}},U=Q,F=Object(x["a"])(U,$,z,!1,null,null,null);F.options.__file="computing.vue";var Y=F.exports,q=n("7d92"),W=n("399f"),B="ðŸ˜¬",Z=["ðŸ˜€","ðŸ˜ƒ","ðŸ˜„","ðŸ˜†","ðŸ˜…","ðŸ˜‚","â˜ºï¸","ðŸ˜Š","ðŸ˜‡","ðŸ™‚","ðŸ™ƒ","ðŸ˜‰","ðŸ˜Œ","ðŸ˜","ðŸ˜˜","ðŸ˜—","ðŸ˜™","ðŸ˜š","ðŸ˜‹","ðŸ˜œ","ðŸ˜","ðŸ˜›","ðŸ¤‘","ðŸ¤—","ðŸ¤“","ðŸ˜Ž","ðŸ˜","ðŸ˜’","ðŸ˜ž","ðŸ˜”","ðŸ˜Ÿ","ðŸ˜¬","ðŸ™","â˜¹ï¸","ðŸ˜£","ðŸ˜–","ðŸ˜«","ðŸ˜©","ðŸ˜¤","ðŸ˜•","ðŸ˜¡","ðŸ˜¶","ðŸ˜","ðŸ˜‘","ðŸ˜¯","ðŸ˜¦","ðŸ˜§","ðŸ˜®","ðŸ˜²","ðŸ˜µ","ðŸ˜³","ðŸ˜¨","ðŸ˜°","ðŸ˜¢","ðŸ˜¥","ðŸ˜","ðŸ˜­","ðŸ˜“","ðŸ˜ª","ðŸ˜´","ðŸ™„","ðŸ¤”","ðŸ˜ ","ðŸ¤","ðŸ˜·","ðŸ¤’","ðŸ¤•","ðŸ˜ˆ","ðŸ‘¿","ðŸ‘»","ðŸ’€","â˜ ï¸","ðŸ‘½","ðŸ‘¾","ðŸ¤–","ðŸŽƒ","ðŸ˜º","ðŸ˜¸","ðŸ˜¹","ðŸ˜»","ðŸ˜¼","ðŸ˜½","ðŸ˜¿","ðŸ˜¾"],J=["ðŸ‘","ðŸ‘Œ","ðŸ‘","ðŸ™","ðŸ‘","ðŸ‘Ž","ðŸ‘Š","âœŠ","âœŒï¸","ðŸ™Œ","ðŸ¤˜","ðŸ‘ˆ","ðŸ‘‰","ðŸ‘†","ðŸ‘‡","â˜ï¸","âœ‹","ðŸ––","ðŸ‘‹","ðŸ’ª"],V=["ðŸ¶","ðŸ±","ðŸ­","ðŸ¹","ðŸ°","ðŸ»","ðŸ¼","ðŸ¨","ðŸ¯","ðŸ¦","ðŸ¦ƒ","ðŸ·","ðŸ®","ðŸµ","ðŸ’","ðŸ”","ðŸ§","ðŸ¦","ðŸ¤","ðŸ£","ðŸ¥","ðŸº","ðŸ—","ðŸ´","ðŸ¦„","ðŸ","ðŸ›","ðŸŒ","ðŸš","ðŸž","ðŸœ","ðŸ•·","ðŸ¢","ðŸ","ðŸ¦‚","ðŸ¦€","ðŸ™","ðŸ ","ðŸŸ","ðŸ¡","ðŸ¬","ðŸ³","ðŸ‹","ðŸŠ","ðŸ†","ðŸ…","ðŸƒ","ðŸ‚","ðŸ„","ðŸª","ðŸ«","ðŸ˜","ðŸŽ","ðŸ–","ðŸ","ðŸ","ðŸ‘","ðŸ•","ðŸ©","ðŸˆ","ðŸ“","ðŸ½","ðŸ•Š","ðŸ‡","ðŸ","ðŸ€","ðŸ¿"],G=["ðŸ","ðŸŽ","ðŸ","ðŸŠ","ðŸ‹","ðŸŒ","ðŸ‰","ðŸ‡","ðŸ“","ðŸˆ","ðŸ’","ðŸ‘","ðŸ","ðŸ…","ðŸ†","ðŸŒ½","ðŸŒ¶","ðŸ ","ðŸŒ°","ðŸ¯","ðŸž","ðŸ§€","ðŸ³","ðŸ¤","ðŸ—","ðŸ–","ðŸ•","ðŸŒ­","ðŸ”","ðŸŸ","ðŸŒ®","ðŸŒ¯","ðŸ","ðŸœ","ðŸ²","ðŸ¥","ðŸ£","ðŸ±","ðŸ›","ðŸš","ðŸ™","ðŸ˜","ðŸ¢","ðŸ¡","ðŸ§","ðŸ¨","ðŸ¦","ðŸº","ðŸŽ‚","ðŸ®","ðŸ­","ðŸ¬","ðŸ«","ðŸ¿","ðŸ©","ðŸª","ðŸ°","â˜•ï¸","ðŸµ","ðŸ¶","ðŸ¼","ðŸ»","ðŸ·","ðŸ¸","ðŸ¹","ðŸ¾"],H=["âŒšï¸","ðŸ“±","ðŸ’»","âŒ¨ï¸","ðŸ–¥","ðŸ–¨","ðŸ–±","ðŸ–²","ðŸ•¹","ðŸ—œ","ðŸ’¾","ðŸ’¿","ðŸ“¼","ðŸ“·","ðŸ—‘","ðŸŽž","ðŸ“ž","â˜Žï¸","ðŸ“Ÿ","ðŸ“ ","ðŸ“º","ðŸ“»","ðŸŽ™","â±","âŒ›ï¸","ðŸ“¡","ðŸ”‹","ðŸ”Œ","ðŸ’¡","ðŸ”¦","ðŸ•¯","ðŸ’·","ðŸ›¢","ðŸ’µ","ðŸ’´","ðŸŽ¥","ðŸ’¶","ðŸ’³","ðŸ’Ž","âš–ï¸","ðŸ”§","ðŸ”¨","ðŸ”©","âš™ï¸","ðŸ”«","ðŸ’£","ðŸ”ª","ðŸ—¡","ðŸš¬","ðŸ”®","ðŸ“¿","ðŸ’ˆ","âš—ï¸","ðŸ”­","ðŸ”¬","ðŸ•³","ðŸ’Š","ðŸ’‰","ðŸŒ¡","ðŸš½","ðŸš°","ðŸ›","ðŸ›Ž","ðŸ—","ðŸšª","ðŸ›‹","ðŸ›","ðŸ–¼","ðŸ›","ðŸŽ","ðŸŽˆ","ðŸŽ€","ðŸŽ‰","âœ‰ï¸","ðŸ“¦","ðŸ·","ðŸ“«","ðŸ“¯","ðŸ“œ","ðŸ“†","ðŸ“…","ðŸ“‡","ðŸ—ƒ","ðŸ—„","ðŸ“‹","ðŸ“‚","ðŸ—ž","ðŸ““","ðŸ“–","ðŸ”—","ðŸ“Ž","ðŸ“","ðŸ“Œ","ðŸ³ï¸","ðŸŒˆ","âœ‚ï¸","ðŸ–Œ","âœï¸","ðŸ”","ðŸ”’","ðŸ´"],X=[Z,J,V,G,H];function ee(e){if(""===e)return B;for(var t="derivepass/"+e,n=Object(q["sha512"])().update(t).digest(),r=new W(n.slice(0,8),"le"),i="",a=0;a<X.length;a++){var o=X[a],s=r.modn(o.length);r.idivn(o.length),i+=o[s]}return i}var te=9e4,ne={name:"master-password",components:{Computing:Y},data:function(){return{password:"",passwordChanged:!1,isConfirming:!1,confirmPassword:"",confirmChanged:!1,computing:!1,error:null}},beforeMount:function(){this.$store.commit("resetCryptoKeys")},computed:Object(N["a"])({},Object(s["b"])({hasApps:function(e){var t=e.applications,n=this.emoji;return t.some(function(e){return e.master===n})},newUser:function(e){return 0===e.applications.length}}),{emoji:function(){return ee(this.password)},emojiConfirm:function(){return ee(this.confirmPassword)},passwordState:function(){return this.passwordChanged?0!==this.password.length?"valid":"invalid":null},invalidPasswordFeedback:function(){return 0===this.password.length?"Master Password can't be empty":""},confirmState:function(){return this.confirmChanged?this.password===this.confirmPassword?"valid":"invalid":null},invalidConfirmFeedback:function(){return 0!==this.confirmPassword.length&&this.password.startsWith(this.confirmPassword)?"Just a few more characters...":this.confirmPassword!==this.password?"Password and confirmation should match":""},masterLabel:function(){return this.newUser?"Choose your Master Password":"Enter your Master Password"},submitText:function(){return this.isConfirming?"Start":this.hasApps?"Decrypt":"Next"},canSubmit:function(){return"valid"===this.passwordState&&(!!this.hasApps||(!this.isConfirming||"valid"===this.confirmState))}}),methods:{onSubmit:function(){var e=this,t=this.emoji;if(this.isConfirming){if(!this.confirmState)return}else if(!this.hasApps)return this.isConfirming=!0,void L()(function(){return e.$refs.confirmRef.focus()});this.computing=!0,this.$derivepass.computeKeys(this.password).then(function(n){e.$store.commit("setCryptoKeys",{master:e.password,crypto:n,emoji:t,logoutTimer:setTimeout(function(){e.$store.commit("resetCryptoKeys"),e.$router.replace("/master")},te)}),e.$router.push("/applications")}).catch(function(t){e.error=t}).finally(function(){e.computing=!1})},onReset:function(){var e=this;this.password="",this.confirmPassword="",this.isConfirming=!1,L()(function(){return e.$refs.passwordRef.focus()})}}},re=ne,ie=(n("6795"),Object(x["a"])(re,S,R,!1,null,"58b2bbe4",null));ie.options.__file="master-password.vue";var ae=ie.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-input-group",{staticClass:"mb-2"},[n("b-form-input",{attrs:{placeholder:"Filter applications"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),n("b-input-group-append",[n("b-btn",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:e.addApplication}},[e._v("\n        Add application\n      ")])],1)],1),e._l(e.applications,function(e){return[n("router-link",{key:e.uuid,attrs:{to:"/applications/"+e.uuid}},[n("b-card",{staticClass:"application mb-1",attrs:{title:e.domain,"sub-title":e.login}})],1)]})],2)},se=[],ue=n("75fc"),ce=(n("6762"),n("2fdb"),n("55dd"),n("e814")),pe=n.n(ce),le=n("5176"),de=n.n(le),fe=(n("6b54"),n("34ef"),n("fda6")),he=d("derivepass:utils:crypto"),me=32,ve=16,ge=64,be=32;function we(e){if(e.length%2!==0)throw new Error("Invalid hex");for(var t=function(e){if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-65+10;if(e>=97&&e<=102)return e-97+10;throw new Error("Not a hex character, code: "+e)},n=new Uint8Array(e.length/2),r=0;r<e.length;r+=2){var i=t(e.charCodeAt(r)),a=t(e.charCodeAt(r+1));n[r>>1]=i<<4|a}return n}function ye(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t}function xe(e,t){if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}function ke(e,t){var n=new Uint8Array(ve);window.crypto.getRandomValues(n);for(var r=Object(fe["createCipheriv"])("aes-256-cbc",t.aesKey,n),i=[n,r.update(e),r.final()],a=Object(q["hmac"])(q["sha256"],t.macKey),o=0;o<i.length;o++){var s=i[o];a.update(s)}var u=a.digest();return"v1:"+i.map(ye).join("")+ye(u)}function Ae(e,t){var n=0;if(/^v1:/.test(e)&&(n=1,e=e.slice(3)),e=we(e),1===n){if(e.length<=ve+be)return he("invalid encrypted value"),"<decrypt failed #0>";var r=Object(q["hmac"])(q["sha256"],t.macKey).update(e.slice(0,e.length-be)).digest(),i=e.slice(e.length-be);if(!xe(r,i))return he("MAC mismatch"),"<decrypt failed #1>";e=e.slice(0,e.length-be)}var a=e.slice(0,ve),o=e.slice(ve),s=Object(fe["createDecipheriv"])("aes-256-cbc",t.aesKey,a);try{return s.update(ye(o),"hex")+s.final()}catch(u){return he("decryption error",u),"<decrypt failed #2>"}}function je(e,t){return de()({},e,{domain:Ae(e.domain,t),login:Ae(e.login,t),revision:pe()(Ae(e.revision,t),10)||1})}function Me(e,t){return de()({},e,{domain:ke(e.domain,t),login:ke(e.login,t),revision:ke(e.revision.toString(),t)})}var Ce=n("c64e"),Oe={name:"application-list",beforeMount:function(){this.$store.getters.showApps||this.$router.replace("/")},data:function(){return{filter:this.$route.query.filter||""}},computed:Object(N["a"])({lowFilter:function(){return this.filter.toLowerCase()}},Object(s["b"])({decryptedApps:function(e){return e.applications.filter(function(t){return t.master===e.emoji&&!t.removed}).map(function(t){return je(t,e.cryptoKeys)})},applications:function(){var e=this;return this.decryptedApps.sort(function(e,t){return e.index-t.index}).filter(function(t){return!e.lowFilter||(t.domain.toLowerCase().includes(e.lowFilter)||t.login.toLowerCase().includes(e.lowFilter))})}})),watch:{filter:function(e){this.$router.replace({path:"/applications",query:{filter:e}})}},methods:{addApplication:function(){var e=Math.max.apply(Math,Object(ue["a"])(this.applications.map(function(e){return e.index})))+1;this.$router.push({path:"/applications/".concat(Ce()),query:{index:e}})}}},De=Oe,Ie=(n("d782"),Object(x["a"])(De,oe,se,!1,null,"0314d5b4",null));Ie.options.__file="application-list.vue";var _e=Ie.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-container",[n("b-row",{attrs:{"align-h":"center"}},[n("h1",[e.isNew?[e._v("New Application")]:[e._v("Application")]],2)]),n("b-row",{attrs:{"align-v":"center"}},[e.app.domain||e.app.login?n("b-col",[n("b",[e._v(e._s(e.app.domain))]),e._v("/"),n("i",[e._v(e._s(e.app.login))])]):e._e(),n("b-col",[n("b-button-group",[e.password?n("b-button",{attrs:{variant:"primary"},on:{click:e.copyPassword}},[e._v("\n            "+e._s(e.copied?"Copied":"Copy Password")+"\n          ")]):n("b-button",{attrs:{variant:"primary",disabled:e.isEmpty},on:{click:function(t){e.compute()}}},[e._v("\n            Compute Password\n          ")]),n("b-button",{on:{click:function(t){e.showDetails=!e.showDetails}}},[e._v("Details")]),n("b-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("Back")])],1)],1)],1)],1),n("computing",{attrs:{active:e.computing,text:"Computing secure password"}}),n("b-collapse",{staticClass:"mt-3",attrs:{id:"application-details"},model:{value:e.showDetails,callback:function(t){e.showDetails=t},expression:"showDetails"}},[n("b-form",{attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.onSave(t)}}},[n("b-form-group",{attrs:{label:"Domain name","label-for":"application-domain",description:"Examples: gmail.com, fb.com, etc","invalid-feedback":e.invalidDomainFeedback,state:e.domainState}},[n("b-form-input",{attrs:{required:"",state:e.domainState?null:"invalid",id:"application-domain",placeholder:"gmail.com"},on:{input:e.resetPassword},model:{value:e.app.domain,callback:function(t){e.$set(e.app,"domain",t)},expression:"app.domain"}})],1),n("b-form-group",{attrs:{label:"Login","label-for":"application-login",description:"Examples: my_user_name, derivepass82","invalid-feedback":e.invalidLoginFeedback,state:e.loginState}},[n("b-form-input",{attrs:{required:"",state:e.loginState?null:"invalid",id:"application-login",placeholder:"my@email.com"},on:{input:e.resetPassword},model:{value:e.app.login,callback:function(t){e.$set(e.app,"login",t)},expression:"app.login"}})],1),n("b-form-group",{attrs:{label:"Revision","label-for":"application-revision",description:"Increment this by one to change password","invalid-feedback":e.invalidRevisionFeedback,state:e.revisionState}},[n("b-form-input",{attrs:{required:"",state:e.revisionState?null:"invalid",type:"number",id:"application-revision"},on:{input:e.resetPassword},model:{value:e.app.revision,callback:function(t){e.$set(e.app,"revision",t)},expression:"app.revision"}})],1),n("b-button-group",{staticClass:"text-right"},[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:!e.hasChanged}},[e._v("\n          "+e._s(e.saved?"Saved":"Save")+"\n        ")]),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.application-confirm-delete",modifiers:{"application-confirm-delete":!0}}],attrs:{variant:"danger"}},[e._v("\n          Delete\n        ")])],1)],1)],1),n("b-modal",{attrs:{id:"application-confirm-delete",title:"Confirm Deletion","ok-variant":"danger","ok-title":"Delete"},on:{ok:e.onDelete}},[n("p",[e._v("This action will irreversibly delete:")]),n("p",[n("b",[e._v(e._s(e.app.domain))]),e._v("/"),n("i",[e._v(e._s(e.app.login))])]),n("p",[e._v("...from the application list.")])])],1)},Se=[],Re=n("0a0d"),Ee=n.n(Re),Le=(n("7514"),{name:"application",components:{Computing:Y},data:function(){var e,t=this.$route.params.uuid,n=this.$store.state.applications.find(function(e){return e.uuid===t});return n&&this.$store.getters.showApps?(e=!1,n=je(n,this.$store.state.cryptoKeys)):(e=!0,n={uuid:t,domain:"",login:"",revision:1,master:this.$store.state.emoji,index:pe()(this.$route.query.index,10)||0,removed:!1,changedAt:Ee()()}),n.removed&&this.$router.replace("/"),{app:n,savedApp:de()({},n),isNew:e,showDetails:e,copied:!1,saved:!1,computing:!1,password:""}},beforeMount:function(){this.$store.getters.showApps||this.$router.replace("/")},computed:{domainState:function(){return 0!==this.app.domain.length},invalidDomainFeedback:function(){return"Domain can't be empty"},loginState:function(){return 0!==this.app.login.length},invalidLoginFeedback:function(){return"Login can't be empty"},revisionState:function(){return this.app.revision>0},invalidRevisionFeedback:function(){return"Revision must be greater than zero"},isEmpty:function(){return!this.app.domain||!this.app.login},hasChanged:function(){return this.app.domain!==this.savedApp.domain||this.app.login!==this.savedApp.login||this.app.revision!==this.savedApp.revision}},methods:{compute:function(){var e=this;this.computing=!0;var t=this.$store.state.master,n="".concat(this.app.domain,"/").concat(this.app.login);this.app.revision>1&&(n+="#".concat(this.app.revision)),this.$derivepass.computePassword(t,n).then(function(t){e.password=t}).catch(function(t){e.error=t}).finally(function(){e.computing=!1})},resetPassword:function(){this.password="",this.copied=!1,this.saved=!1},copyPassword:function(){var e=this;this.copied||(this.copied=!0,setTimeout(function(){return e.copied=!1},2500),this.$copyText(this.password))},onSave:function(){var e=this,t=de()(Me(this.app,this.$store.state.cryptoKeys),{changedAt:Ee()()});this.$store.commit("receiveApp",t),de()(this.savedApp,this.app),this.saved=!0,setTimeout(function(){return e.saved=!1},2500)},onDelete:function(){var e=de()(Me(this.app,this.$store.state.cryptoKeys),{removed:!0,changedAt:Ee()()});this.$store.commit("receiveApp",e),this.$router.go(-1)}}}),Ne=Le,$e=Object(x["a"])(Ne,Te,Se,!1,null,null,null);$e.options.__file="application.vue";var ze=$e.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{title:"iCloud Sync"}},[n("cloud-kit")],1)},Ke=[],Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?[n("b-alert",{attrs:{show:"",variant:"info"}},[e._v("Connecting to iCloud APIs...")])]:e.error?[n("b-alert",{attrs:{show:"",variant:"danger"}},[n("p",[e._v("Failed to connect to iCloud APIs!")]),n("p",[e._v("Details: "),n("i",[e._v(e._s(e.error.message||e.err))])]),n("b-btn",{on:{click:function(t){e.error=void 0}}},[e._v("Dismiss")])],1)]:[e.isAuthenticated?n("b-btn",{on:{click:e.signOut}},[e._v("Disable")]):n("b-btn",{on:{click:e.signIn}},[e._v("Enable")])]],2)},Ue=[],Fe={name:"cloud-kit",data:function(){return{loading:!0,error:null,isAuthenticated:!1}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.asyncInit();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),this.error=e.t0;case 8:return e.prev=8,this.loading=!1,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[0,5,8,11]])}));function t(){return e.apply(this,arguments)}return t}(),methods:{asyncInit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$cloudKit.init();case 2:this.isAuthenticated=this.$cloudKit.isAuthenticated;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),signIn:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$cloudKit.signIn();case 4:this.isAuthenticated=!0,e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](1),this.error=e.t0,e.abrupt("return");case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,7,11,14]])}));function t(){return e.apply(this,arguments)}return t}(),signOut:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$cloudKit.signOut();case 4:this.isAuthenticated=!1,e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](1),this.error=e.t0,e.abrupt("return");case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,7,11,14]])}));function t(){return e.apply(this,arguments)}return t}()}},Ye=Fe,qe=Object(x["a"])(Ye,Qe,Ue,!1,null,null,null);qe.options.__file="cloud-kit.vue";var We=qe.exports,Be={name:"settings",components:{CloudKit:We}},Ze=Be,Je=(n("51b3"),Object(x["a"])(Ze,Pe,Ke,!1,null,null,null));Je.options.__file="settings.vue";var Ve=Je.exports,Ge=function(){return{logoutTimer:null,cryptoKeys:null,emoji:"",master:"",applications:[],settings:{cloudKitReady:!1}}},He={showApps:function(e){return e.cryptoKeys&&e.emoji}},Xe=d("derivepass:store"),et={receiveApp:function(e,t){var n=e.applications.find(function(e){return e.uuid===t.uuid});if(!n)return Xe("new app with uuid: %j",t.uuid),void e.applications.push(t);if(!(n.changedAt>=t.changedAt)){var r=n.removed||t.removed,i=t.changedAt;r!==t.removed&&(i=Ee()()),Xe("updating existing app %j from %j to %j",t.uuid,n.changedAt,t.changedAt),de()(n,t,{removed:r,changedAt:i})}},setCryptoKeys:function(e,t){e.master=t.master,e.cryptoKeys=t.crypto,e.emoji=t.emoji,e.logoutTimer&&clearTimeout(e.logoutTimer),e.logoutTimer=t.logoutTimer},resetCryptoKeys:function(e){e.logoutTimer&&clearTimeout(e.logoutTimer),e.logoutTimer=null,e.cryptoKeys=null,e.master="",e.emoji=""}},tt={state:Ge,getters:He,mutations:et},nt=(n("ac6a"),n("5df3"),n("2d7d")),rt=n.n(nt),it=n("795b"),at=n.n(it),ot=n("d225"),st=n("b0b4"),ut=n("308d"),ct=n("6bb5"),pt=n("4e2b"),lt=n("774e"),dt=n.n(lt),ft=n("b6d0"),ht=n.n(ft),mt=50,vt=function(){function e(){Object(ot["a"])(this,e),this.store=null,this.received=new rt.a,this.buffer=new ht.a,this.bufferTimer=null}return Object(st["a"])(e,[{key:"setStore",value:function(e){var t=this;if(this.store)throw new Error("Can't assign store twice");this.store=e,this.store.subscribe(function(e){var n=e.type,r=e.payload;if("receiveApp"===n){if(t.received.has(r.uuid)){var i=t.received.get(r.uuid);if(i.changedAt>=r.changedAt)return}t.received.set(r.uuid,r),t.buffer.add(r.uuid),t.bufferTimer&&clearTimeout(t.bufferTimer),t.bufferTimer=setTimeout(function(){var e=dt()(t.buffer);t.buffer.clear(),t.bufferTimer=null,t.sendApps(e)},mt)}})}},{key:"receiveApp",value:function(e){this.received.set(e.uuid,de()({},e)),this.store.commit("receiveApp",e)}},{key:"sendApps",value:function(){throw new Error("Not implemented")}},{key:"getApps",value:function(e){var t=this;return e.map(function(e){return t.store.state.applications.find(function(t){return t.uuid===e})})}}]),e}(),gt=d("derivepass:sync:cloud-kit"),bt=500,wt=1500,yt=36e5,xt=function(e){function t(){var e;return Object(ot["a"])(this,t),e=Object(ut["a"])(this,Object(ct["a"])(t).call(this)),e.ready=!1,e.initPromise=new at.a(function(t){e.initResolve=t}),e.container=null,e.db=null,e.user=null,e.syncTimer=null,e.changeTags=new rt.a,e.buttons={signIn:document.getElementById("apple-sign-in-button"),signOut:document.getElementById("apple-sign-out-button")},e}return Object(pt["a"])(t,e),Object(st["a"])(t,[{key:"setProvider",value:function(e){if(this.container)throw new Error("Already has a provider");this.container=e.container,this.db=e.db,this.initResolve()}},{key:"init",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:if(!this.ready){e.next=4;break}return e.abrupt("return");case 4:return this.ready=!0,gt("setting up authentication"),e.next=8,this.container.setUpAuth();case 8:this.user=e.sent,this.authLoop();case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"signIn",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.buttons.signIn.children.length){e.next=2;break}throw new Error("CloudKit initialization error");case 2:if(t=this.buttons.signIn.children[0],"none"!==t.style.display){e.next=10;break}return gt("signIn button invisible, retrying after delay"),e.next=7,new at.a(function(e){return setTimeout(e,bt)});case 7:return e.next=9,this.signIn();case 9:return e.abrupt("return",e.sent);case 10:return gt("signIn clicked"),e.next=13,at.a.all([this.container.whenUserSignsIn(),t.click()]);case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"signOut",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.buttons.signOut.children.length){e.next=2;break}throw new Error("CloudKit initialization error");case 2:if(t=this.buttons.signOut.children[0],"none"!==t.style.display){e.next=10;break}return gt("signOut button invisible, retrying after delay"),e.next=7,new at.a(function(e){return setTimeout(e,bt)});case 7:return e.next=9,this.signIn();case 9:return e.abrupt("return",e.sent);case 10:return gt("signOut clicked"),e.next=13,at.a.all([this.container.whenUserSignsOut(),t.click()]);case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"sendApps",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.user){e.next=2;break}return e.abrupt("return");case 2:return gt("sending apps uuids.len=%d",t.length),n=this.getApps(t),r=n.map(function(e){return s.appToRecord(e)}),e.next=7,this.db.saveRecords(r);case 7:if(i=e.sent,i.hasErrors){e.next=11;break}return gt("successfully sent apps"),e.abrupt("return");case 11:return a=i.errors.some(function(e){return"CONFLICT"===e.ckErrorCode}),a&&(gt("has conflicts, forcing full synchronization"),this.sync()),o=i.errors.map(function(e){return e.recordName}),gt("apps with errors uuidsLeft.len=%d",o.length),e.next=17,this.sendApps(o);case 17:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"authLoop",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:gt("starting auth loop");case 1:if(e.prev=1,this.user?this.sync():this.pauseSync(),!this.user){e.next=10;break}return gt("auth loop: awaiting sign out"),e.next=7,this.container.whenUserSignsOut();case 7:this.user=null,e.next=16;break;case 10:return gt("auth loop: awaiting sign in"),e.next=13,this.container.whenUserSignsIn();case 13:this.user=e.sent,gt("auth loop: user signed in, forcing update"),this.sendApps(this.store.state.applications.map(function(e){return e.uuid}));case 16:e.next=25;break;case 18:return e.prev=18,e.t0=e["catch"](1),gt("auth loop: got error %j, retrying in %d ms",e.t0,wt),e.next=23,new at.a(function(e){return setTimeout(e,wt)});case 23:return e.next=25,this.reloadUser();case 25:e.next=1;break;case 27:case"end":return e.stop()}},e,this,[[1,18]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"reloadUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.container.fetchCurrentUserIdentity();case 3:this.user=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.user=null;case 9:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"sync",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i,o,s,u,c,p,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.pauseSync(),gt("sync: attempting sync"),e.prev=2,t=null,n=0;case 5:return gt("sync: query with marker %j",t),e.next=8,this.db.performQuery({recordType:"EncryptedApplication",continuationMarker:t});case 8:if(r=e.sent,!r.hasErrors){e.next=12;break}return gt("sync: got errors",r.errors),e.abrupt("break",33);case 12:for(i=!0,o=!1,s=void 0,e.prev=15,u=a()(r.records);!(i=(c=u.next()).done);i=!0)p=c.value,this.receiveRecord(p),n++;e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](15),o=!0,s=e.t0;case 23:e.prev=23,e.prev=24,i||null==u.return||u.return();case 26:if(e.prev=26,!o){e.next=29;break}throw s;case 29:return e.finish(26);case 30:return e.finish(23);case 31:t=r.continuationMarker;case 32:if(t){e.next=5;break}case 33:gt("sync: received %d apps",n),e.next=39;break;case 36:e.prev=36,e.t1=e["catch"](2),gt("sync: error",e.t1);case 39:if(!this.syncTimer){e.next=41;break}return e.abrupt("return");case 41:this.syncTimer=setTimeout(function(){return l.sync()},yt);case 42:case"end":return e.stop()}},e,this,[[2,36],[15,19,23,31],[24,,26,30]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"pauseSync",value:function(){this.syncTimer&&(gt("sync: pause"),clearTimeout(this.syncTimer)),this.syncTimer=null}},{key:"receiveRecord",value:function(e){var t=e.fields,n={uuid:e.recordName,domain:t.domain.value,login:t.login.value,revision:t.revision.value,master:t.master.value,index:t.index.value,removed:!!t.removed.value,changedAt:e.modified.timestamp};e.recordChangeTag&&this.changeTags.set(n.uuid,e.recordChangeTag),this.receiveApp(n)}},{key:"appToRecord",value:function(e){var t=this.changeTags.get(e.uuid),n=function(e){return{value:e}};return{recordType:"EncryptedApplication",recordName:e.uuid,recordChangeTag:t,fields:{domain:n(e.domain),login:n(e.login),revision:n(e.revision),master:n(e.master),index:n(e.index),removed:n(e.removed?1:0)}}}},{key:"isAuthenticated",get:function(){return!!this.user}}]),t}(vt),kt="production",At={development:"a549ed0b287668fdcef031438d4350e1e96ec12e758499bc1360a03564becaf8",production:"cd95e9dcb918b2d45b94a10416eaed02df8727d7b6fdde4669a5fbcacefafe1b"};function jt(){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getDefaultContainer(),r=n.privateCloudDatabase,e.abrupt("return",{container:n,db:r});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),!window.CloudKit){e.next=5;break}return e.next=4,t(window.CloudKit);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,new at.a(function(e,n){var r=document.createElement("script");r.async=!0,r.addEventListener("load",function(){var n=window.CloudKit;n.configure({containers:[{containerIdentifier:"iCloud.com.indutny.DerivePass",apiTokenAuth:{apiToken:At[kt],persist:!0},environment:kt}]}),document.body.removeChild(r),e(t(n))}),r.addEventListener("error",function(e){return n(e)}),r.src="https://cdn.apple-cloudkit.com/ck/2/cloudkit.js",document.body.appendChild(r)});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)})),Mt.apply(this,arguments)}var Ct=n("f499"),Ot=n.n(Ct),Dt=n("2a88"),It=d("derivepass:sync:local-storage"),_t="derivepass/".concat(kt),Tt=function(e){function t(){var e;return Object(ot["a"])(this,t),e=Object(ut["a"])(this,Object(ct["a"])(t).call(this)),e.db=window.localStorage,e}return Object(pt["a"])(t,e),Object(st["a"])(t,[{key:"setStore",value:function(e){if(Object(Dt["a"])(Object(ct["a"])(t.prototype),"setStore",this).call(this,e),this.db){for(var n=0,r=0;r<this.db.length;r++){var i=this.db.key(r);if(i.startsWith(_t)){var a=void 0;try{a=JSON.parse(this.db.getItem(i))}catch(o){this.db.removeItem(i);continue}n++,this.receiveApp(a)}}It("emitting initial db.len=%d",n)}}},{key:"sendApps",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,o,s,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.db){e.next=2;break}return e.abrupt("return");case 2:for(n=this.getApps(t),r=!0,i=!1,o=void 0,e.prev=6,s=a()(n);!(r=(u=s.next()).done);r=!0)c=u.value,this.db.setItem("".concat(_t,"/").concat(c.uuid),Ot()(c));e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),i=!0,o=e.t0;case 14:e.prev=14,e.prev=15,r||null==s.return||s.return();case 17:if(e.prev=17,!i){e.next=20;break}throw o;case 20:return e.finish(17);case 21:return e.finish(14);case 22:It("updated uuids.len=%d",t.length);case 23:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21]])}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(vt),St=(n("28a5"),n("f921")),Rt=n.n(St),Et=d("derivepass:plugins:derivepass"),Lt=new TextEncoder("utf-8"),Nt="derivepass/aes",$t=18,zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_.".split(""),Pt=function(){function e(){Object(ot["a"])(this,e),this.handle=null,this.queue=[]}return Object(st["a"])(e,[{key:"init",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.handle){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new at.a(function(e,t){Et("creating worker");var n=new Rt.a;Et("awaiting worker ready message"),n.onmessage=function(r){var i=r.data,a=i.type,o=i.payload;if("ready"===a)Et("worker ready"),e(n);else{if("error"!==a)throw new Error('Unknown message type: "'.concat(a,'"'));Et("worker error",o),t(new Error(o))}}});case 4:this.handle=e.sent,this.handle.onmessage=function(e){var n=e.data,r=n.type,i=n.payload;if(0===t.queue.length)throw new Error('Unexpected message with type: "'.concat(r,'"'));Et("worker message type=%j",r,i);var a=t.queue.shift();if(a.type!==r)throw new Error('Unexpected message with type: "'.concat(r,'"'));a.resolve(i)};case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"send",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new at.a(function(e){r.handle.postMessage({type:t,payload:n}),r.queue.push({type:t,resolve:e})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),Kt=function(){function e(){Object(ot["a"])(this,e),this.workers={idle:[],active:new ht.a}}return Object(st["a"])(e,[{key:"getWorker",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.workers.idle.length){e.next=6;break}return t=new Pt,e.next=4,t.init();case 4:e.next=7;break;case 6:t=this.workers.idle.shift();case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"scrypt",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getWorker();case 2:return i=e.sent,this.workers.active.add(i),t=Lt.encode(t),n=Lt.encode(n),e.prev=6,e.next=9,i.send("derivepass",{master:t,domain:n,outSize:r});case 9:return e.abrupt("return",e.sent);case 10:return e.prev=10,this.workers.active.delete(i),this.workers.idle.push(i),e.finish(10);case 14:case"end":return e.stop()}},e,this,[[6,,10,14]])}));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"computeKeys",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.scrypt(t,Nt,me+ge);case 2:return n=e.sent,e.abrupt("return",{aesKey:n.slice(0,me),macKey:n.slice(me)});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"computePassword",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.scrypt(t,n,$t);case 2:for(r=e.sent,i="",a=0;a<r.length;a+=3)o=r[a],s=r[a+1],u=r[a+2],i+=zt[o>>>2],i+=zt[(3&o)<<4|s>>>4],i+=zt[(15&s)<<2|u>>>6],i+=zt[63&u];return e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}(),Qt={install:function(e){e.prototype.$derivepass=new Kt}},Ut=n("9483");Object(Ut["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("7f7f");var Ft=[{name:"localStorage",test:function(){return window.localStorage}},{name:"randomValues",test:function(){return window.crypto&&window.crypto.getRandomValues}},{name:"Web Workers",test:function(){return window.Worker}},{name:"Web Assembly",test:function(){return window.WebAssembly&&window.WebAssembly.instantiate}},{name:"Promise",test:function(){return window.Promise}}];function Yt(){for(var e=[],t=0;t<Ft.length;t++){var n=Ft[t];n.test()||e.push(n.name)}return 0!==e.length&&e}var qt=d("derivepass:main"),Wt=Yt();if(Wt){var Bt=document.createElement("b");Bt.textContent="Following features are required for running this application:",document.body.appendChild(Bt);var Zt=!0,Jt=!1,Vt=void 0;try{for(var Gt,Ht=a()(Wt);!(Zt=(Gt=Ht.next()).done);Zt=!0){var Xt=Gt.value,en=document.createElement("p");en.textContent="* ".concat(Xt),document.body.appendChild(en)}}catch(sn){Jt=!0,Vt=sn}finally{try{Zt||null==Ht.return||Ht.return()}finally{if(Jt)throw Vt}}}o["a"].config.productionTip=!1,o["a"].use(s["a"]),o["a"].use(u["a"]),o["a"].use(l["a"]),o["a"].use(p.a),o["a"].use(Qt);var tn=new s["a"].Store(tt),nn=new xt;o["a"].prototype.$cloudKit=nn,qt("loading CloudKit provider"),jt().then(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return nn.setProvider(t),nn.setStore(tn),qt("initializing CloudKit instance"),e.next=5,nn.init();case 5:qt("CloudKit fully operational");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){qt("CloudKit error",e)});var rn=new Tt;rn.setStore(tn);var an=[{path:"/",redirect:"/master"},{path:"/master",component:ae},{path:"/applications",component:_e},{path:"/applications/:uuid",component:ze},{path:"/settings",component:Ve},{path:"*",redirect:"/master"}],on=new u["a"]({routes:an});new o["a"]({store:tn,router:on,render:function(e){return e(T)}}).$mount("#app")},6795:function(e,t,n){"use strict";var r=n("93e2"),i=n.n(r);i.a},"8c58":function(e,t,n){},"93e2":function(e,t,n){},"9b19":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2Ij48cGF0aCBkPSJNMCAwdjI1NmgyNTZWMEgwem0xMjggMTZhNTYuMDQyIDU2LjA0MiAwIDAgMSA1Ni4wNDMgNTYuMDQzdjU2LjQ2NWE2OS44ODMgNjkuODgzIDAgMCAxIDEzLjg0IDQxLjYxQTY5Ljg4MyA2OS44ODMgMCAwIDEgMTI4IDI0MGE2OS44ODMgNjkuODgzIDAgMCAxLTY5Ljg4My02OS44ODMgNjkuODgzIDY5Ljg4MyAwIDAgMSAxMy44NC00MS42MjNWNzIuMDQzQTU2LjA0MiA1Ni4wNDIgMCAwIDEgMTI4IDE2em0wIDE0LjAxYTQyLjAzMiA0Mi4wMzIgMCAwIDAtNDIuMDMxIDQyLjAzM3Y0Mi4zNTNBNjkuODgzIDY5Ljg4MyAwIDAgMSAxMjggMTAwLjIzMmE2OS44ODMgNjkuODgzIDAgMCAxIDQyLjAzMSAxNC4xMzdWNzIuMDQzQTQyLjAzMiA0Mi4wMzIgMCAwIDAgMTI4IDMwLjAxem0tNy4wMDYgOTEuMDd2Ny42YTQyLjAzMiA0Mi4wMzIgMCAwIDAtMzUuMDI1IDQxLjQzN0E0Mi4wMzIgNDIuMDMyIDAgMCAwIDEyOCAyMTIuMTQ4YTQyLjAzMiA0Mi4wMzIgMCAwIDAgNDIuMDMxLTQyLjAzIDQyLjAzMiA0Mi4wMzIgMCAwIDAtMzUuMDI1LTQxLjR2LTcuNjM4aC0xNC4wMTJ6bTAgMjEuMDE2aDE0LjAxMnY4LjIzYTIxLjAxNiAyMS4wMTYgMCAwIDEgMTQuMDEgMTkuNzkxQTIxLjAxNiAyMS4wMTYgMCAwIDEgMTI4IDE5MS4xMzNhMjEuMDE2IDIxLjAxNiAwIDAgMS0yMS4wMTYtMjEuMDE2IDIxLjAxNiAyMS4wMTYgMCAwIDEgMTQuMDEtMTkuNzg3di04LjIzNHoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="},b42a:function(e,t,n){},d782:function(e,t,n){"use strict";var r=n("8c58"),i=n.n(r);i.a},d86e:function(e,t,n){},f921:function(e,t,n){e.exports=function(){return new Worker(n.p+"749afdcf43048d4d5ed7.worker.js")}}});
//# sourceMappingURL=app.53686da7.js.map